<!DOCTYPE html>
<html lang="pt">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>[2017强网杯] 线下总结 | Pr0ph3t's blog</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/assets/css/bootstrap-3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-69613510-1', 'auto');
    ga('send', 'pageview');

</script>


    <link rel="shortcut icon" href="/assets/images/favicon.png">

    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed/"> 

</head>


    <body>
      <div class="container">

        <header class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <h1 class="">Pr0ph3t</h1>
    <p>
    <span class="reserved">char</span> nick[<span class="number">9</span>] = <span class="string">"Pr0ph3t"</span>;
    </p>
    <p>
    printf(<a href="https://github.com/t3hp0rP" target="_blank"><span class="string">"https://github.com/<span class="reserved">%s\n</span>"</span></a>,nick);
    </p>
    <p>
    printf(<span class="string">"<span class="reserved">%s\x40</span>pr0ph3t<span class="reserved">\x2e\\\b</span>com<span class="reserved">\n</span>"</span>,<span class="string">"admin"</span>);
    </p>
    <!-- <p>
            printf(<a href="https://blog.pr0ph3t.com" target="_blank"><span class="string">"https://<span class="reserved">%s</span>.pr0ph3t.com<span class="reserved">\n</span>"</span></a>,nick);
        </p> -->
    <p>
    puts(<a href="/assets/misc/pubkey.gpg.txt" target="_blank"><span class="string">"91B6 191A C2C3 285C 201D  801B B5A3 6B56 8528 E140"</span></a>);
    </p>
  </div>
</header>

<div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <div class="menu">
      <ul>
          <li><a href="/">home</a></li>
          <li><a href="/articles/">articles</a></li>
          <li><a href="/friendlink">friends</a></li>
      </ul>
    </div>
  </div>
</div>



        <div class="row">
          <div class="col-lg-8 col-lg-offset-2">
            <main>
            <div class="post">

  <header class="post-header">
    <h1>[2017强网杯] 线下总结</h1>
  </header>

  <article class="post-content">
  <div class="post">

  <header class="post-header">
    <p class="meta">
        Sep 25, 2017
        
        
        •
        <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#Attack&Defense" class="reserved">Attack&Defense</a>,</span><span><a href="/category/#old" class="reserved">old</a></span>
    </p>
  </header>

  <article class="post-content">
  <p>线下终于打完了。。。和预想中的挺多不一样的。。。不过不可否认的是这次打得的确不好。。还有很多需要学习和改进的地方</p>

<p>历程：<br>
一开始一上线发现发现无法tar打包在html目录就上线改默认密码，当时大概是把17支左右的队伍后台都拿下了 然后就一直在找上传点 这里要检讨一下，找上传点找得太慢了，导致后面丢失了很多后台控制权，而且还有一点要检讨的就是官方说没有requests库但是其实kali里面是自带requests库的。。。这里没找到导致因为不熟悉urllib2库而写不了脚本 这里要更加检讨一下， 然后这场比赛最重要的一点不足是没有利用好自己的写的不死马 没有上传好(也是因为没有脚本的原因) 导致后面队伍都做好防御的时候就没办法利用了 只能拣屎玩了。。。而且还有一点疑惑是暨大到底是利用了哪一个点能畅通无阻的getshell呢？很想去问一下Orz</p>

<p>然后就是到下午了， 下午是渗透主场。。前晚看了一晚上的跳板鸡代理之类的知识。。。。但是没啥用 shell都没get到。。。</p>

<p>首先是暴露了两个服务器 一个80端口是metinfo的cms，另外一个80端口是一个IIS，88端口是一个weCenter的http服务<br>
这里有点坑。。。。第二个Web服务的80端口的iis竟然是88端口的一个子文件夹。。。。这里有点绕不过来。。。因为在我开发的经验里一般来说一个端口是一种应用。。。而且80端口的东西并没有在88端口有相应的功能点应用得到。。。所以不能理解出题人。。。Orz。。。可能还是自己太菜了。。。所以80端口即使可以PUT东西上去。。但是并没有啥用。。。put上去的asp都是404 然后第一个Web应用没有找到啥能用的东西。。。赛后去询问了一下主办方，正确的思路应该如下：</p>

<ol>
<li>Web2的88端口的robots.txt有一个明文flag</li>
<li>Web1服务里面admin跳转中源码有一个明文flag，需要curl逃逸跳转才能得到</li>
<li>Web2的80端口把.htaccess的内容Move到一个txt，发现php3是可以执行的，然后再发现80端口的东西在88端口一个图片文件夹内，然后就PUT一个php3的shell上去，getshell，然后在Web2服务器内的mysql数据库内发现Web1的数据库， 获得Web1管理员的账号密码，然后在Web1中getshell，然后再开启反向代理扫一下内网ip和端口，再后面的就不太清楚了。</li>
</ol>

<p>这次的缺点是缺少渗透的思想，要理解到服务器之间全都是有联系的，一个服务器很难getshell的时候不妨去试试同一ip段下的另一个服务器的服务，说不定就能找到一开始服务器的突破点</p>

<hr>

<p>还是太菜了。。。继续学习Orz。。。</p>

  </article>

	<p class="feed-recomendation">
		Did you like the post? Subscribe to the <a href="/feed/">feed</a>.
	</p>

  <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'pr0ph3t';
    var disqus_config = function () {
        this.page.identifier = "/posts/%E5%BC%BA%E7%BD%91%E6%9D%AF-%E7%BA%BF%E4%B8%8B%E6%80%BB%E7%BB%93/";
    };
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>




</div>

  </article>

</div>

            </main>
          </div>
        </div>

        <div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <footer>
      Thx!
    </footer>
  </div>
</div>
<script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
$(document).ready(function() {
	$("img").each(function() {
		var strA = "<a data-fancybox='gallery' href='" + this.src + "'></a>";
		$(this).wrapAll(strA);
    });
});
</script>
<!-- <script type="text/javascript" src="/assets/js/images.js"></script> -->

      </div>
    </body>
</html>
