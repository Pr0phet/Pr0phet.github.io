<!DOCTYPE html>
<html lang="pt">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Articles Posts | Pr0ph3t's blog</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/assets/css/bootstrap-3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="https://libs.cdnjs.net/fancybox/3.5.7/jquery.fancybox.min.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    <link rel="shortcut icon" href="/assets/images/favicon.png">

    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed/"> 

</head>


    <body>
      <div class="container">

        <header class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <h1 class="">Pr0ph3t</h1>
    <p>
    <span class="reserved">char</span> nick[<span class="number">7</span>] = <span class="string">"Pr0ph3t"</span>;
    </p>
    <p>
    printf(<a href="https://github.com/t3hp0rP" target="_blank"><span class="string">"https://github.com/<span class="reserved">%s\n</span>"</span></a>,nick);
    </p>
    <p>
    printf(<span class="string">"<span class="reserved">%s\x40</span>pr0ph3t<span class="reserved">\x2e\\\b</span>com<span class="reserved">\n</span>"</span>,<span class="string">"admin"</span>);
    </p>
    <!-- <p>
            printf(<a href="https://blog.pr0ph3t.com" target="_blank"><span class="string">"https://<span class="reserved">%s</span>.pr0ph3t.com<span class="reserved">\n</span>"</span></a>,nick);
        </p> -->
    <p>
    puts(<a href="/assets/misc/pubkey.gpg.txt" target="_blank"><span class="string">"91B6 191A C2C3 285C 201D  801B B5A3 6B56 8528 E140"</span></a>);
    </p>
  </div>
</header>

<div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <div class="menu">
      <ul>
          <li><a href="/">home</a></li>
          <li><a href="/articles/">articles</a></li>
          <li><a href="/friendlink">friends</a></li>
      </ul>
    </div>
  </div>
</div>



        <div class="row">
          <div class="col-lg-8 col-lg-offset-2">
            <main>
            <div class="post">

  <header class="post-header">
    <h1>Articles Posts</h1>
  </header>

  <article class="post-content">
  <div style="width:100%;text-align:right;">
    <a href="/category/" title="Category List">Category List</a>
    |
    <a href="/feed/" title="Atom Feed Posts">Atom Feed</a>
</div>


<ul class="posts">
    
        <li>
            <span class="post-date">Aug 05, 2020</span>
            ::
            <a class="post-link" href="/posts/Cobalt-Strike4.0%E7%A0%B4%E8%A7%A3%E6%97%A5%E8%AE%B0/">[工具]Cobalt Strike4.0 破解日记</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#RedTeam" class="reserved">RedTeam</a>,</span><span><a href="/category/#Tools" class="reserved">Tools</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">May 02, 2018</span>
            ::
            <a class="post-link" href="/posts/%E9%A2%98%E7%9B%AE-%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%88%A9%E7%94%A8gopher%E7%9A%84%E5%86%85%E7%BD%91mysql%E7%9B%B2%E6%B3%A8/">[题目]记一次利用gopher的内网mysql盲注</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Feb 03, 2018</span>
            ::
            <a class="post-link" href="/posts/hitctf-Web-Writeup/">[hitctf] Web Writeup</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Jan 26, 2018</span>
            ::
            <a class="post-link" href="/posts/hitcon2017-Baby-H-master-php-2017-%E5%A4%8D%E7%8E%B0/">[hitcon2017] Baby^H-master-php-2017 复现</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#hitcon" class="reserved">hitcon</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Jan 14, 2018</span>
            ::
            <a class="post-link" href="/posts/hitcon2017-SSRF-Me%E5%A4%8D%E7%8E%B0/">[hitcon2017] SSRF Me复现</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#hitcon" class="reserved">hitcon</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Jan 09, 2018</span>
            ::
            <a class="post-link" href="/posts/hitcon2017-Sql-so-hard-%E5%A4%8D%E7%8E%B0/">[hitcon2017] Sql-so-hard 复现</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#hitcon" class="reserved">hitcon</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Dec 24, 2017</span>
            ::
            <a class="post-link" href="/posts/X-NUCA-%E6%80%BB%E5%86%B3%E8%B5%9B%E5%B0%8F%E7%BB%93/">[2017 X-NUCA]总决赛小结</a>
            @ {
            
            <span><a href="/category/#Attack&amp;Defense" class="reserved">Attack&amp;Defense</a>,</span><span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#old" class="reserved">old</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Nov 28, 2017</span>
            ::
            <a class="post-link" href="/posts/hitcon2017-BabyFirst-Revenge-V2%E5%A4%8D%E7%8E%B0/">[hitcon2017] BabyFirst Revenge V2复现</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#hitcon" class="reserved">hitcon</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Nov 27, 2017</span>
            ::
            <a class="post-link" href="/posts/hitcon2017-BabyFirst-Revenge%E5%A4%8D%E7%8E%B0/">[hitcon2017] BabyFirst Revenge复现</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#hitcon" class="reserved">hitcon</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Nov 09, 2017</span>
            ::
            <a class="post-link" href="/posts/Web%E7%8B%97%E8%A6%81%E6%87%82%E7%9A%84Padding-Oracle%E6%94%BB%E5%87%BB/">Web狗要懂的Padding Oracle攻击</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#crypto" class="reserved">crypto</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Oct 24, 2017</span>
            ::
            <a class="post-link" href="/posts/Web%E7%8B%97%E8%A6%81%E6%87%82%E7%9A%84CBC%E7%BF%BB%E8%BD%AC%E5%AD%97%E8%8A%82%E6%94%BB%E5%87%BB-Flipped-Ciphertext-Bits/">Web狗要懂的CBC翻转字节攻击(Flipped Ciphertext Bits)</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#crypto" class="reserved">crypto</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Oct 11, 2017</span>
            ::
            <a class="post-link" href="/posts/%E4%B8%96%E5%AE%89%E6%9D%AF-%E5%86%B3%E8%B5%9BWriteup/">[2017世安杯] 决赛Writeup</a>
            @ {
            
            <span><a href="/category/#Attack&amp;Defense" class="reserved">Attack&amp;Defense</a>,</span><span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#old" class="reserved">old</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Oct 09, 2017</span>
            ::
            <a class="post-link" href="/posts/%E4%B8%96%E5%AE%89%E6%9D%AF-%E5%88%9D%E8%B5%9BWeb-Writeup/">[2017世安杯] 初赛Web Writeup</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Sep 25, 2017</span>
            ::
            <a class="post-link" href="/posts/%E5%BC%BA%E7%BD%91%E6%9D%AF-%E7%BA%BF%E4%B8%8B%E6%80%BB%E7%BB%93/">[2017强网杯] 线下总结</a>
            @ {
            
            <span><a href="/category/#Attack&amp;Defense" class="reserved">Attack&amp;Defense</a>,</span><span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#old" class="reserved">old</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Sep 20, 2017</span>
            ::
            <a class="post-link" href="/posts/WHCTF-Web%E8%AF%A6%E7%BB%86%E5%A4%8D%E7%8E%B0-%E4%BC%AA-WP/">[2017WHCTF] Web详细复现(伪)WP</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Sep 11, 2017</span>
            ::
            <a class="post-link" href="/posts/%E5%BC%BA%E7%BD%91%E6%9D%AF-Web-Writeup/">[2017强网杯] Web Writeup</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Aug 16, 2017</span>
            ::
            <a class="post-link" href="/posts/XMAN-%E7%BA%BF%E4%B8%8B%E8%B5%9B%E6%80%BB%E7%BB%93/">[XMAN] 线下赛总结</a>
            @ {
            
            <span><a href="/category/#Attack&amp;Defense" class="reserved">Attack&amp;Defense</a>,</span><span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#old" class="reserved">old</a></span>
            
            }
        </li>
    
        <li>
            <span class="post-date">Aug 15, 2017</span>
            ::
            <a class="post-link" href="/posts/X-nuca-%E8%B5%9B%E5%89%8D%E7%83%AD%E8%BA%ABWriteup/">[2017X-nuca] 赛前热身Writeup</a>
            @ {
            
            <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#old" class="reserved">old</a>,</span><span><a href="/category/#writeup" class="reserved">writeup</a></span>
            
            }
        </li>
    
</ul>


  </article>

</div>

            </main>
          </div>
        </div>

        <div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <footer>
      Thx!
    </footer>
  </div>
</div>
<script src="https://libs.cdnjs.net/jquery/3.3.1/jquery.min.js"></script>
<script src="https://libs.cdnjs.net/fancybox/3.5.7/jquery.fancybox.min.css"></script>
<script>
$(document).ready(function() {
	$("img").each(function() {
		var strA = "<a data-fancybox='gallery' href='" + this.src + "'></a>";
		$(this).wrapAll(strA);
    });
});
</script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-87275583-1']);
  _gaq.push(['_trackPageview']);
 (function() {
   var ga = document.createElement('script');ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>
    AV.initialize("FUf6n3OvGTkv0cqnGGbJyS5Q-MdYXbMMI", "FV3i9cojG6DyOMel86rUaaqR");
    AV.useAVCloudUS();
    //新增访问次数
    function addCount(Counter) {
      // 页面（博客文章）中的信息：leancloud_visitors
      // id为page.url， data-flag-title为page.title
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      // 只根据文章的url查询LeanCloud服务器中的数据
      query.equalTo("post_url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {//说明LeanCloud中已经记录了这篇文章
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("visited_times");// 将点击次数加1
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                var newTimes = counter.get('visited_times');
                $element.find('.leancloud-visitors-count').text(newTimes);
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            // 执行这里，说明LeanCloud中还没有记录此文章
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("post_title", title);// 把文章标题
            newcounter.set("post_url", url); // 文章url
            newcounter.set("visited_times", 1); // 初始点击次数：1次
            newcounter.save(null, { // 上传到LeanCloud服务器中
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                var newTimes = newcounter.get('visited_times');
                $element.find('.leancloud-visitors-count').text(newTimes);
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    //仅根据url和title查出当前访问次数，不做+1操作
    function showCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      // 只根据文章的url查询LeanCloud服务器中的数据
      query.equalTo("post_url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {//说明LeanCloud中已经记录了这篇文章
            var counter = results[0];
            var $element = $(document.getElementById(url));
            var newTimes = counter.get('visited_times');
            $element.find('.leancloud-visitors-count').text(newTimes);
          } else {
            //如果表里没查到记录，那就是异常情况了
            console.log('异常情况，不应该没记录的');
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    //调用API获取IP
    function getVisitorIpAndJudge() {
      var ip;
      var options = {
        type: 'GET',
        url: "https://ctf.pr0ph3t.com/"
      };
      $.ajax(options)
      .done(function(data, textStatus, jqXHR) {
        if(textStatus == "success") {
          ip = data.trim().split('<br>')[0];
        }
        judgeVisitor(ip)
      });
    }

    //判断访客是否已访问过该文章，及访问时间，符合条件则增加一次访问次数
    function judgeVisitor(ip) {
      var Counter = AV.Object.extend("visited_times");
      var Visitor = AV.Object.extend("visitors_record");

      var $postInfo = $(".leancloud_visitors");
      var post_url = $postInfo.attr('id').trim();

      var query = new AV.Query(Visitor);

      query.equalTo("visitor_ip", ip);
      query.equalTo("post_url", post_url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            console.log('该IP已访问过该文章');

            var oldVisitor = results[0];

            var lastTime = oldVisitor.updatedAt;
            var curTime = new Date();

            var timePassed = curTime.getTime() - lastTime.getTime();

            if(timePassed > 1 * 60 * 1000) {
              console.log('距离该IP上一次访问该文章已超过了1分钟，更新访问记录，并增加访问次数');

              addCount(Counter);

              oldVisitor.fetchWhenSave(true);
              oldVisitor.save(null, {
                success: function(oldVisitor) { },
                error: function(oldVisitor, error) {
                  console.log('Failed to save visitor record, with error message: ' + error.message);
                }
              });
            } else {
              console.log('这是该IP 1分钟内重复访问该文章，不更新访问记录，不增加访问次数');
              showCount(Counter);
            }
          } else {
            console.log('该IP第一次访问该文章，保存新的访问记录，并增加访问次数');

            addCount(Counter);

            var newVisitor = new Visitor();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newVisitor.setACL(acl);
            newVisitor.set("visitor_ip", ip);
            newVisitor.set("post_url", post_url);
            newVisitor.save(null, { // 上传到LeanCloud服务器中
              success: function(newVisitor) { },
              error: function(newVisitor, error) {
                console.log('Failed to create visitor record, with error message: ' + error.message);
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
          addCount(Counter);
        }
      });
    }

    $(function() {
      if ($('.leancloud_visitors').length == 1) {
        // 文章页面，调用判断方法，对符合条件的访问增加访问次数
        getVisitorIpAndJudge();
      } else if ($('.post-link').length > 1){
        // 首页 暂未使用
        // showHitCount(Counter);
      }
    });
  </script>

<!-- <script type="text/javascript" src="/assets/js/images.js"></script> -->

      </div>
    </body>
</html>
